\documentclass[twoside, openany]{book}
\usepackage{libertine}
\usepackage[T1]{fontenc}

\usepackage[top=1in, bottom=1in, inner=1in, outer=.5in]{geometry}

\usepackage[contents, nonumber]{cuisine}
\renewcommand{\recipefont}{\large}
\renewcommand*{\recipestepnumberfont}{\large\itshape\bfseries}
\renewcommand{\recipetimefont}{\itshape}
\renewcommand{\recipeservingsfont}{\bfseries}
\renewcommand{\recipetitlefont}{\Large\bfseries}
\RecipeWidths{\textwidth}{.2\textwidth}{.05\textwidth}{.2\textwidth}{.075\textwidth}{.075\textwidth}

\usepackage{hyperref}
\hypersetup{colorlinks, citecolor=blue, filecolor=black, linkcolor=black, urlcolor=black}

\usepackage{subfiles}
\usepackage[quenya]{tengwarscript}
\tengmag{1.2}
\usepackage{fancyhdr}
\usepackage{etoolbox}
\usepackage{xspace}
\usepackage{thumbs}
\usepackage{tabularx}
\def\arraystretch{1.25}
\def\belowcaptionskip{0.2em}
\usepackage{hhline}
\usepackage{slashbox}
\usepackage{nicefrac}
\let\fr\nicefrac
\usepackage{siunitx}
\usepackage{ifthen}
\usepackage{substr}

\newboolean{showuntested}
\IfSubStringInString{\detokenize{Tested}}{\jobname}{}{\setboolean{showuntested}{true}}

\newcommand{\untested}[1]{\ifthenelse{\boolean{showuntested}}{#1}{}}

\newcommand{\dish}[1]{\subfile{entries/#1}}
\newcommand{\ap}{all-purpose flour}
\newcommand{\ww}{whole wheat flour\xspace}
\newcommand{\wwp}{whole wheat pastry flour\xspace}
\newcommand{\wwb}{whole wheat bread flour\xspace}
\newcommand{\tooth}[1]{until it passes the toothpick test, about #1 minutes.}

\newcommand{\thumbmark}[1]{\addthumb{#1}{\Roman{chapter}}{black}{gray}}

% Define a macro for the current chapter name
%https://tex.stackexchange.com/questions/310046/fancyhdr-and-redefinition-of-leftmark-rightmark
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
% enddef

\fancypagestyle{frontmaterial}{
	\fancyhf{}
	\renewcommand{\headrulewidth}{0pt}
	\setlength{\footskip}{.6in}
	\pagenumbering{roman}
	\fancyfoot[C]{\thepage}
	\fancyhead[RE,LO]{\thepage}
}

\fancypagestyle{main}{
	\fancyhf{}
	\renewcommand{\headrulewidth}{0pt}
	\setlength{\footskip}{.6in}
	\pagenumbering{arabic}
	\fancyhead[RE,LO]{\thepage}
	\fancyhead[RO,LE]{\MakeUppercase{\large\textbf{\leftmark}}}
	\fancyfoot[C]{\normalsize \thepage\ of\ \pageref{LastPage}}
}

\newcommand{\frontsetup}{
	\pagestyle{frontmaterial}
	\fancypagestyle{plain}{
		\pagestyle{frontmaterial}
		% But with no header because that would be ugly on the already mostly empty top quarter of the page
		\fancyhead{}
	}
}

\newcommand{\mainsetup}{
	% If the newpage isn't here, the last page of the table of contents will be affected by this setup
	\newpage
	% Conditionally add a clear page to make the main stuff with the new page numbering start on an odd page otherwise page margins and thumb mark side will be wrong as long as the TOC spans an odd number of pages
	% I would prefer to avoid a blank page because this isn't a formal thing and is mostly intended as a digital document anyway but latex doesn't like violating ~common typesetting conventions~ like right side == odd page
	{\thispagestyle{empty} \cleardoublepage}
	\pagestyle{main}
	\fancypagestyle{plain}{
		\pagestyle{main}
		% But with no header because that would be ugly on the already mostly empty top quarter of the page
		\fancyhead{}
	}
}


% TODO: Correct times. At best the current times are approximate.

\begin{document}

\frontsetup

{
	\bfseries \tableofcontents
}


\mainsetup

\chapter{Breakfast}
\thumbmark{Breakfast}


\section{Egg}

\dish{FarmersEggs}


\section{Not Egg}

\dish{Pancakes}

\untested{\dish{SavoryOatmeal}}






\chapter{Dinner}
\thumbmark{Dinner}


\section{Full Meals}

\dish{AlmondChickenAndRice}

\dish{BeefPasties}

\dish{BeefRoast}

\dish{BeefStew}

\dish{BLTs}

\dish{BroccoliCheeseSoup}

\dish{ChuckwagonCasserole}

\dish{FriedRice}

\dish{Goulash}

\dish{GreenTortellini}

\dish{Hamburgers}

\dish{MongolianBeef}

\dish{ParmesanChicken}

\dish{Ribs}

\dish{RosemaryChicken}

\dish{SalamiCheeseStromboli}

\dish{Spaghetti}

\dish{SquashSoup}

\dish{StirFry}

\dish{ThanksgivingDinner}

\dish{WaxBeanSoup}

\untested{\dish{WashtunkalaStew}}

\untested{\dish{PadThai}}

\untested{\dish{ParsnipsAndChicken}}

\untested{\dish{Jambalaya}}

\untested{\dish{PortobelloChili}}

\untested{\dish{OreganoMushroomChicken}}

\untested{\dish{TurkeySageMeatballs}}

\untested{\dish{SesameGingerPorkAndQuinoa}}

\untested{\dish{RiceEdamameAppleBowls}}

\untested{\dish{SageBreadedChicken}}

\untested{\dish{SrirachaChicken}}

\untested{\dish{OnePanChicken}}

\untested{\dish{OnionBeefCalzone}}

\untested{\dish{OvenFriedChicken}}

\untested{\dish{LentilBolognese}}

\untested{\dish{ChanaMasala}}

\untested{\dish{Bulgogi}}

\untested{\dish{BakedMacAndCheese}}


\section{Components}

\dish{Pasta}

\dish{Pesto}

\dish{PizzaSauce}

\dish{Quinoa}

\dish{Rice}

\dish{SoftBoiledEggs}

\dish{SpaghettiSauce}

\dish{Stuffing}

\dish{WholeWheatPizzaDough}

\untested{\dish{LimeGingerVinaigrette}}

\untested{\dish{PeanutSauce}}






\chapter{Sides}
\thumbmark{Sides}


\section{Breads}

\dish{Biscuits}

\dish{Cornbread}

\dish{DinnerRolls}

\untested{\dish{CheddarChiveCornbread}}

\untested{\dish{SquashCornMuffins}}


\section{Fruits and Vegetables}

\dish{BakedPotatoes}

\dish{BrusselsSprouts}

\dish{Corn}

\dish{CornAndBeanSalad}

\dish{CranberrySauce}

\dish{FruitSalad}

\dish{GreenBeans}

\dish{GreenBeansWithCream}

\dish{Latkes}

\dish{MashedPotatoes}

\dish{MashedPotatoesInstantPot}

\dish{RoastVegetables}

\untested{\dish{RoastPotatoesMetric}}






\chapter{Snacks}
\thumbmark{Snacks}

\section{Smoothies}

\dish{BerrySmoothie}

\dish{GreenTeaSmoothie}


\section{Dips}

\dish{BlackBeanDip}

\dish{Salsa}

\untested{\dish{NutDip}}

\untested{\dish{PumpkinButter}}






\chapter{Desserts}
\addthumb{Desserts}{\Roman{chapter}}{black}{gray}


\section{Cookies}

\dish{BrownButterChocolateChipCookies}

\dish{C4Cookies}

\dish{Gingerbread}

\dish{Lebkuchen}

\dish{PrideOfIowa}

\dish{PumpkinCookies}

\dish{Snickerdoodles}

\dish{SugarCookies}

\untested{\dish{ChocolatePeanutTartlets}}


\section{Quick Breads}

\dish{BananaBread}

\dish{OrangeBread}

\dish{PumpkinBread}

\dish{RhubarbCoffeeCake}

\dish{Scones}

\untested{\dish{Baklava}}

\untested{\dish{GingerBiscuits}}

\untested{\dish{PumpkinWalnutMuffins}}

\untested{\dish{BlueberryWalnutMuffins}}

\untested{\dish{RedVelvetBrownies}}

\untested{\dish{FudgyBrownies}}

\untested{\dish{Lembas}}

\untested{\dish{NutellaBrownies}}

\untested{\dish{RaspberryScones}}


\section{Pies}

\dish{PieDough}

\dish{ApplePie}

\dish{CherryPie}

\dish{RhubarbPie}

\untested{\dish{BlueberryTart}}


\section{Fruit Desserts}

\dish{BakedApples}

\dish{BerryCrumble}

\dish{RhubarbSauce}

\untested{\dish{BoiledApples}}

\untested{\dish{CoconutRicePudding}}

\untested{\dish{LemonBars}}

\untested{\dish{CherryRaspberrySorbet}}

\untested{\dish{BerryJam}}


\section{Cake}

\dish{ChocolateCake}

\dish{ButtercreamFrosting}

\untested{\dish{CranberryCake}}

\untested{\dish{RaspberryCheesecake}}






\chapter{Appendix}
\thumbmark{Appendix}


\section{Measurement Conversions}

\begin{table}[h]
	\centering
	\label{tab:volume}
	\caption{Volume}
	\begin{tabular}{c||c|c|c|c|c}
		\backslashbox{One}{Is this many}& \textbf{Teaspoon} & \textbf{Tablespoon} & \textbf{Fluid Ounce} & \textbf{Cup} & \textbf{mL} \\ \hhline{=#=|=|=|=|=}
		\textbf{Teaspoon}               &         1         &        \fr13        &      \fr{1}{12}      &  \fr{1}{48}  &     5       \\ \hline
		\textbf{Tablespoon}             &         3         &          1          &        \fr12         &  \fr{1}{16}  &    15       \\ \hline
		\textbf{Fluid Ounce}            &        12         &          2          &          1           &    \fr18     &    30       \\ \hline
		\textbf{Cup}                    &        48         &         16          &          8           &      1       &    240      \\ \hline
		\textbf{mL}                     &       \fr15       &     \fr{1}{15}      &      \fr{1}{30}      & \fr{1}{240}  &     1
	\end{tabular}
\end{table}


1 pint = 2 cups

1 quart = 2 pints = 4 cups

1 gallon = 4 quarts = 8 pints = 16 cups = 128 fluid ounces

1 liter = 34 fluid ounces $\approx$ 1 quart

1 teaspoon yeast = 0.1 ounces = 3.4 grams

\begin{table}[h]
	\centering
	\label{tab:temp}
	\caption{Temperature}
	\begin{tabular}{c|c}
		\si{\degree}F & \si{\degree}C \\ \hline
		     250      &      130      \\ \hline
		     300      &      150      \\ \hline
		     325      &      170      \\ \hline
		     350      &      180      \\ \hline
		     375      &      190      \\ \hline
		     400      &      200      \\ \hline
		     425      &      220
	\end{tabular}
\end{table}


\begin{table}[ht]
	\centering
	\label{tab:mass}
	\caption{Mass and Weight}
	\begin{tabular}{c|c}
		 g   &       oz       \\ \hline
		 10  &     \fr14      \\ \hline
		 15  &     \fr12      \\ \hline
		 25  &       1        \\ \hline
		 50  &     \fr74      \\ \hline
		 75  &   \fr{11}{4}   \\ \hline
		100  &     \fr72      \\ \hline
		150  &   \fr{11}{2}   \\ \hline
		200  &       7        \\ \hline
		250  &       9        \\ \hline
		300  &   \fr{21}{2}   \\ \hline
		350  &       12       \\ \hline
		400  &       14       \\ \hline
		450  &   16 (1 lb)    \\ \hline
		500  &       18       \\ \hline
		700  &       24       \\ \hline
		1000 & 36 (2 lb 4 oz)
	\end{tabular}
\end{table}



\end{document}
